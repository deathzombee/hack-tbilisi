<div ng-include="'views/dashboard/appointments/shell-settings.html'"></div><div ng-include="'views/common/spinner.html'" ng-show="isLoading"></div><div ng-hide="isLoading" class="container"><div class="row"><div class="col-md-offset-2 col-md-8"><h2>Edit Resource {{ resource.name }}</h2></div></div><div ng-show="isChangingPic"><div ng-controller="PicUploaderCtrl"><div ng-hide="isUploadingPic" class="row"><div class="col-md-offset-2 col-md-8"><div ng-hide="isImageUploading" ngf-select="ngf-select" ngf-drop="ngf-drop" ng-model="files" ngf-change="uploadPic($files)" ngf-drag-over-class="dragover" ngf-capture="'camera'" ngf-multiple="false" ngf-allow-dir="false" ngf-accept="'image/*'" class="well text-center"><div>Drop Image here</div><div>Or Click to select</div><div ngf-no-file-drop="ngf-no-file-drop">File Drag/Drop is not supported for this browser</div></div></div></div><div ng-hide="isUploadingPic" class="row"><div class="col-md-offset-2 col-md-4"><div>Source</div><div><img-crop on-load-done="imgLoaded=true" image="myImage" area-type="square" result-image="myCroppedImage" result-image-format="image/jpeg" result-image-size="300" style="width:300px; height:300px;"></img-crop></div></div><div class="col-md-4"><div>New profile pic</div><div><img ng-show="imgLoaded" ng-src="{{myCroppedImage}}" class="img-thumbnail img-responsive"/></div></div></div><div ng-show="isUploadingPic" class="row"><div class="col-md-offset-2 col-md-8 text-center"><div ng-include="'views/common/spinner.html'"></div><div class="text-center"><strong>Saving...</strong></div></div></div><div class="row"><div class="col-md-offset-2 col-md-8"><br/><div class="pull-right"><button ng-click="cancelChangingPic()" class="btn btn-default">Cancel</button><span>&nbsp;</span><span><button ng-disabled="!imgLoaded || isUploadingPic" ng-click="savePic(myCroppedImage, picInfo)" class="btn btn-primary">Save New Pic</button></span></div></div></div></div></div><div ng-hide="isChangingPic" class="row"><div class="col-md-offset-2 col-md-2 text-center"><div ng-show="resource.pic"><img profile-img="resource" profile-type="resource" profile-size="large" profile-nocache="true" img-changed="imgChanged" class="img-thumbnail img-responsive"/></div><div><button ng-click="startChangingPic()" ng-disabled="isSaving" class="btn btn-primary">Change Pic</button></div></div><div class="col-md-6"><form name="resourceForm" class="form-horizontal"><div ng-class="{ 'has-error': resourceForm.name.$error.required }" class="form-group"><label for="name" class="col-md-3 control-label">Name*</label><div class="col-md-9"><input name="name" ng-model="resource.name" ng-required="true" placeholder="Name" ng-disabled="isSaving" autofocus="autofocus" class="form-control"/></div></div><div class="form-group"><label for="description" class="col-md-3 control-label">Description</label><div class="col-md-9"><input name="description" ng-model="resource.description" placeholder="Description" ng-disabled="isSaving" class="form-control"/></div></div><div class="form-group"><label for="practitioner" class="col-md-3 control-label">Linked practitioner</label><div class="col-md-9"><select name="practitioner" ng-model="resource.practitioner" ng-disabled="isSaving" ng-options="practitioner._id as practitioner.name for practitioner in practitioners" class="form-control"><option value="">Not linked</option></select></div></div><div ng-class="{ 'has-error': resourceForm.appointmentInterval.$error.required }" class="form-group"><label for="appointmentInterval" class="col-md-3 control-label">Appointment book interval (min)*</label><div class="col-md-9"><input name="appointmentInterval" ng-model="resource.appointmentInterval" ng-required="true" placeholder="Appointment book interval" ng-disabled="isSaving" class="form-control"/></div></div><div class="form-group"><label for="reminderMessage" class="col-md-3 control-label">Reminder message*</label><div class="col-md-9"><input name="reminderMessage" ng-model="resource.reminderMessage" ng-required="true" placeholder="Default reminder message" ng-disabled="isSaving" class="form-control"/></div></div><div class="form-group"><label for="remindBeforeStart" class="col-md-3 control-label">Time before start to remind (min)*</label><div class="col-md-9"><input name="remindBeforeStart" ng-model="resource.remindBeforeStart" ng-required="true" placeholder="Default time before start to remind" ng-disabled="isSaving" class="form-control"/></div></div><div ng-show="resource._id" class="form-group"><label for="status" class="col-md-3 control-label">Status</label><div class="col-md-9"><select name="status" ng-model="resource.status" ng-disabled="isSaving" class="form-control"><option value="active">Active</option><option value="inactive">InActive</option></select></div></div></form></div></div><div ng-hide="isChangingPic" class="row"><div class="col-md-10"><div class="pull-right"><a href="/appointments/settings/resources" class="btn btn-default">Cancel</a>&nbsp;<button ng-click="saveResource()" ng-disabled="resourceForm.$invalid || isSaving || !canEdit" class="btn btn-primary">Save</button></div></div></div></div>
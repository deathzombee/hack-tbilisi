form.form-horizontal.appointment-form(name="appointmentForm")
    .form-group
        label.col-md-3.control-label(for="appointmentTemplate") Use template
        .col-md-9
            .input-group
                input.form-control(type="text" name="appointmentTemplate" placeholder="Appointment template"
                                   ng-model="appointment.appointmentTemplate" ng-change="templateChanged()" ng-disabled="isSaving"
                                   typeahead="template as template.name for template in templates | filter: { name: $viewValue }"
                                   typeahead-template-url="customTemplate.html" typeahead-editable="false")
                script(type="text/ng-template" id="customTemplate.html")
                    a
                        span(bind-html-unsafe="match.label | typeaheadHighlight:query")
                        p
                            small {{ match.model.resourceNames }}
                .input-group-btn
                    button.btn.btn-success(title="Save as template"
                                           ng-show="canEditTemplate" ng-click="saveAsTemplate()"
                                           ng-disabled="isSaving || appointmentForm.$invalid || appointment.appointmentTemplate")
                        span.glyphicon.glyphicon-plus-sign
                    button.btn.btn-info(title="Replace template"
                                        ng-show="canEditTemplate" ng-click="replaceTemplate()"
                                        ng-disabled="isSaving || appointmentForm.$invalid || !appointment.appointmentTemplate")
                        span.glyphicon.glyphicon-edit

    .form-group(ng-class="{ 'has-error': appointmentForm.appointmentTypeName.$error.required }")
        label.col-md-3.control-label(for="appointmentTypeName") Type*
        .col-md-9
            input.form-control(type="text" name="appointmentTypeName" placeholder="Appointment Type"
                               ng-model="appointment.appointmentTypeName" ng-required="true" ng-disabled="isSaving" autofocus)

    .form-group
        label.col-md-3.control-label Resource(s)
        .col-md-9
            isteven-multi-select(input-model="resources" output-model="appointment.selectedResources" output-properties="_id"
                                 item-label="picElem name" button-label="picElem name" helper-elements="all filter none"
                                 max-labels="4" tick-property="selected" max-height="405px" ng-disabled="isSaving")

    .form-group
        label.col-md-3.control-label Client(s)
        .col-md-9
            .input-group
                isteven-multi-select(input-model="clients" output-model="appointment.selectedClients" output-properties="_id"
                                     item-label="picElem name" button-label="picElem name" helper-elements="all filter none"
                                     max-labels="4" tick-property="selected" max-height="405px" ng-disabled="isSaving")

                .input-group-btn
                    button.btn.btn-success(ng-click="createClient()")
                        span.glyphicon.glyphicon-plus-sign

    .form-group
        label.col-md-3.control-label(for="color") Color
        .col-md-9
            spectrum-colorpicker(ng-model="appointment.color" ng-disabled="isSaving" options="colorpickerOpts")

    .form-group(ng-class="{ 'has-error': appointmentForm.duration.$error.required || appointmentForm.duration.$error.min }")
        label.col-md-3.control-label(for="duration") Duration*
        .col-md-9
            .input-group
                input.form-control(type="number" name="duration" placeholder="Duration"
                                   ng-model="appointment.duration" ng-required="true" min="0" ng-disabled="isSaving")
                .input-group-addon min

    .form-group(ng-class="{ 'has-error': appointmentForm.startDate.$error.required }")
        label.col-md-3.control-label(for="startDate") Start date*
        .col-md-5.start-date
            .input-group
                input.form-control(type="text" name="startDate" placeholder="Default time before start to remind"
                                   ng-model="appointment.start" ng-required="true" ng-disabled="isSaving"
                                   datepicker-popup="EEE dd-MMMM-yyyy" datepicker-options="dateOptions"
                                   is-open="opened" close-text="Close")
                .input-group-btn
                    button.btn.btn-default.btn-info(type="button" ng-click="openDatePicker($event)")
                        i.glyphicon.glyphicon-calendar
        .col-md-4
            timepicker(ng-model="appointment.start" ng-change="tpChanged()" mousewheel="false"
                       hour-step="tpOptions.hstep" minute-step="tpOptions.mstep" show-meridian="tpOptions.ismeridian")

    .form-group
        label.col-md-3.control-label(for="duration") Note
        .col-md-9
            textarea.form-control(name="note" placeholder="Note" msd-elastic="\n"
                                  ng-model="appointment.note" ng-disabled="isSaving")
